# Домашнее задание к занятию «Основы Terraform. Yandex Cloud» - Пугач Евгений.


---

## `Создание ветки terraform-02`

![Скриншот 1](https://github.com/PugachEV72/ter-hw-01/blob/terraform-02/img/2023-09-10_13-07-20.png)

---

## `Задание 1`

В качестве решения приложите:

- скриншот ЛК Yandex Cloud с созданной ВМ;
- скриншот успешного подключения к консоли ВМ через ssh;
- ответы на вопросы:
  1. В чем заключается суть намеренно допущенных в коде ошибок? 
  2. Как в процессе обучения могут пригодиться параметры `preemptible = true` и  
 `core_fraction=5` в параметрах ВМ?

### Ответ:

Скриншот ЛК Yandex Cloud с созданной ВМ
![Скриншот 2](https://github.com/PugachEV72/ter-hw-01/blob/terraform-02/img/2023-09-05_17-05-41.png)

Скриншот подключения к консоли ВМ через ssh
![Скриншот 3](https://github.com/PugachEV72/ter-hw-01/blob/terraform-02/img/2023-09-05_17-20-52.png)

Скриншот с ошибками
![Скриншот 4](https://github.com/PugachEV72/ter-hw-01/blob/terraform-02/img/2023-09-10_14-31-07.png)

Мною было найдено несколько ошибок:
- орфографическая в написании слова `standart`, испраил на `standard`;
- существует только три версии платформы `standard`, исправил на `v1`;
- на всех платформах standard доступно минимум 2 ядра, в конфиге указано 1 ядро, исправил на 2.

Параметры виртуальных машин:
- `preemptible = true` означает, что ВМ прерываемая, это хорошо тем, что если забыть ее выключить, она  
 будет выключена автоматически в течении 24 часов с момента запуска, это позволит сохранить финансы;
- `core_fraction=5` указывает на уровень производительности CPU, от его значения зависит стоимость ВМ,  
 что в конечном итоге тоже позволяет экономить. 

---

3. Выполните код проекта. Найдите в State-файле секретное содержимое созданного ресурса random_password,  
   пришлите в качестве ответа конкретный ключ и его значение.

### Ответ:

![Скриншот 3](https://github.com/PugachEV72/Images/blob/master/2023-07-22_00-09-45.png)

![Скриншот 4](https://github.com/PugachEV72/Images/blob/master/2023-07-22_00-17-20.png)

![Скриншот 5](https://github.com/PugachEV72/Images/blob/master/2023-07-22_00-17-58.png)

![Скриншот 6](https://github.com/PugachEV72/Images/blob/master/2023-07-22_00-21-36.png)

---

4. Раскомментируйте блок кода, примерно расположенный на строчках 29-42 файла main.tf. Выполните команду  
   terraform validate. Объясните в чем заключаются намеренно допущенные ошибки? Исправьте их.

### Ответ:

![Скриншот 7](https://github.com/PugachEV72/Images/blob/master/2023-07-22_00-29-21.png)

Блок ресурса должен иметь 2 значения: тип и имя, в примере указано одно значение, из-за чего возникает ошибка.  
Имя не может начинаться с цифры, но может начинаться с (_) или буквы. Также допущена ошибка в формате  
обращения к ресурсу для использования значения.  

Внесенные исправления:

![Скриншот 8](https://github.com/PugachEV72/Images/blob/master/2023-07-22_00-46-27.png)

---

5. Выполните код. В качестве ответа приложите вывод команды docker ps.
6. Замените имя docker-контейнера в блоке кода на hello_world, выполните команду terraform apply -auto-approve.  
   Объясните своими словами, в чем может быть опасность применения ключа -auto-approve ? В качестве ответа  
   дополнительно приложите вывод команды docker ps.
7. Уничтожьте созданные ресурсы с помощью terraform. Убедитесь, что все ресурсы удалены. Приложите содержимое  
   файла terraform.tfstate.

### Ответ:

![Скриншот 9](https://github.com/PugachEV72/Images/blob/master/2023-07-22_00-50-40.png)

![Скриншот 10](https://github.com/PugachEV72/Images/blob/master/2023-07-22_00-56-37.png)

Опасность применения ключа -auto-approve, заключается в том, что команда terraform apply -auto-approve пропускает  
интерактивное утверждение плана перед применением.

![Скриншот 11](https://github.com/PugachEV72/Images/blob/master/2023-07-22_01-01-39.png)

---

8. Объясните, почему при этом не был удален docker образ nginx:latest ?

### Ответ:

Если Keep_locally имеет значение true, то образ Docker не будет удален при операции уничтожения, если - false, то  
произойдет удаление образа из локального хранилища при операции уничтожения.

![Скриншот 12](https://github.com/PugachEV72/Images/blob/master/2023-07-22_21-12-29.png)

---

### Дополнительные задания (со звездочкой*)


## `Задание 2`

В качестве ответа приложите plan для создаваемого ресурса.

### Ответ:

![Скриншот 13](https://github.com/PugachEV72/Images/blob/master/2023-07-22_16-26-06.png)

---

